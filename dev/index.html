<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · SimpleMock.jl</title><link rel="canonical" href="https://christopher-dG.github.io/SimpleMock.jl/index.html"/><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>SimpleMock.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Home</a><ul class="internal"></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Home</a></li></ul><a class="edit-page" href="https://github.com/christopher-dG/SimpleMock.jl/blob/master/docs/src/index.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Home</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="SimpleMock-1" href="#SimpleMock-1">SimpleMock</a></h1><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.SimpleMock" href="#SimpleMock.SimpleMock"><code>SimpleMock.SimpleMock</code></a> — <span class="docstring-category">Module</span>.</div><div><div><p>A basic mocking module, inspired by Python&#39;s <a href="https://docs.python.org/3/library/unittest.mock.html"><code>unittest.mock</code></a> and implemented with <a href="https://github.com/jrevels/Cassette.jl">Cassette</a>.</p><p><strong>Usage</strong></p><p>For usage examples, see <a href="#SimpleMock.mock"><code>mock</code></a>.</p><p><strong>Differences from <code>unittest.mock</code></strong></p><ul><li>SimpleMock only implements mocking of function calls, as opposed to arbitrary monkey-patching.</li><li>Neither <code>getfield</code> nor <code>setfield!</code> is not implemented for the default <a href="#SimpleMock.Mock"><code>Mock</code></a> object.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL1-L12">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.mock" href="#SimpleMock.mock"><code>SimpleMock.mock</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">mock(f::Function[, ctx::Symbol], args...)</code></pre><p>Run <code>f</code> with specified functions replaced with <a href="#SimpleMock.Mock"><code>Mock</code></a>s.</p><div class="admonition warning"><div class="admonition-title">Warning</div><div class="admonition-text"><p>There are a few issues with this function, see them on <a href="https://github.com/christopher-dG/SimpleMock.jl/issues?q=is%3Aissue+is%3Aopen+label%3A%22Function%3A+mock%22">GitHub</a>.</p></div></div><p><strong>Examples</strong></p><p>Mocking a single function:</p><pre><code class="language-julia">mock(get) do get
    Base.get(1)  # Would normally throw a `MethodError`.
    @assert called_once_with(get, 1)
end</code></pre><p>Mocking a function with a custom <code>Mock</code>:</p><pre><code class="language-julia">mock(get =&gt; Mock(; return_value=1)) do get
    @assert Base.get(1) == 1
    @assert called_once_with(get, 1)
end</code></pre><p><strong>Reusing A <code>Context</code></strong></p><p><strong>TODO</strong>: doc about reusing <code>Context</code> types.</p></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL182-L212">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.Mock" href="#SimpleMock.Mock"><code>SimpleMock.Mock</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Mock(; return_value=Mock(), side_effect=nothing)</code></pre><p>Create a new mocking object, which behaves similarly to Python&#39;s <a href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock"><code>Mock</code></a>.</p><p><strong>Return Value</strong></p><p>Use the <code>return_value</code> keyword to set the value to be returned upon calling the mock. By default, the return value is a new <code>Mock</code>.</p><p><strong>Side Effects</strong></p><p>Use the <code>side_effect</code> keyword to set a side effect to occur upon calling the mock.</p><ul><li>If the value is an <code>Exception</code>, then the exception is thrown.</li><li>If the value is a function, then it is called with the same arguments and keywords.</li><li>If the value is a <code>Vector</code>, then each call uses the next element.</li><li>Any other value is returned without modification.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL55-L70">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.calls" href="#SimpleMock.calls"><code>SimpleMock.calls</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">calls(::Mock) -&gt; Vector{Call}</code></pre><p>Return the call history of the <a href="#SimpleMock.Mock"><code>Mock</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL106-L110">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.ncalls" href="#SimpleMock.ncalls"><code>SimpleMock.ncalls</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">ncalls(::Mock) -&gt; Int</code></pre><p>Return the number of times that the <a href="#SimpleMock.Mock"><code>Mock</code></a> has been called.</p></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL113-L117">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.called" href="#SimpleMock.called"><code>SimpleMock.called</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">called(::Mock) -&gt; Bool</code></pre><p>Return whether or not the <a href="#SimpleMock.Mock"><code>Mock</code></a> has been called.</p></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL120-L124">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.called_once" href="#SimpleMock.called_once"><code>SimpleMock.called_once</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">called_once(::Mock) -&gt; Bool</code></pre><p>Return whether or not the <a href="#SimpleMock.Mock"><code>Mock</code></a> has been called exactly once.</p></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL127-L131">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.called_with" href="#SimpleMock.called_with"><code>SimpleMock.called_with</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">called_with(::Mock, args...; kwargs...) -&gt; Bool</code></pre><p>Return whether or not the <a href="#SimpleMock.Mock"><code>Mock</code></a> has been called with the given arguments.</p></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL134-L138">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.called_once_with" href="#SimpleMock.called_once_with"><code>SimpleMock.called_once_with</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">called_once_with(::Mock, args...; kwargs...) -&gt; Bool</code></pre><p>Return whether or not the <a href="#SimpleMock.Mock"><code>Mock</code></a> has been called exactly once with the given arguments.</p></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL141-L145">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.Call" href="#SimpleMock.Call"><code>SimpleMock.Call</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Call(args...; kwargs...)</code></pre><p>Represents a function call.</p></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL41-L45">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.has_call" href="#SimpleMock.has_call"><code>SimpleMock.has_call</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">has_call(::Mock, ::Call) -&gt; Bool</code></pre><p>Similiar to <a href="#SimpleMock.called_with"><code>called_with</code></a>, but using a <a href="#SimpleMock.Call"><code>Call</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL149-L153">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.has_calls" href="#SimpleMock.has_calls"><code>SimpleMock.has_calls</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">has_calls(::Mock, ::Calls...) -&gt; Bool</code></pre><p>Return whether or not the <a href="#SimpleMock.Mock"><code>Mock</code></a> has a particular ordered sequence of <a href="#SimpleMock.Call"><code>Call</code></a>s.</p></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL156-L160">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SimpleMock.reset!" href="#SimpleMock.reset!"><code>SimpleMock.reset!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">reset!(::Mock)</code></pre><p>Reset a <a href="#SimpleMock.Mock"><code>Mock</code></a>&#39;s call history and internal variables. Side effects and return values are preserved.</p></div></div><a class="source-link" target="_blank" href="https://github.com/christopher-dG/SimpleMock.jl/blob/55836ffb19123b2c22e6b35a90560fe3bcc38407/src/SimpleMock.jl#LL174-L179">source</a></section><ul><li><a href="#SimpleMock.SimpleMock"><code>SimpleMock.SimpleMock</code></a></li><li><a href="#SimpleMock.Call"><code>SimpleMock.Call</code></a></li><li><a href="#SimpleMock.Mock"><code>SimpleMock.Mock</code></a></li><li><a href="#SimpleMock.called"><code>SimpleMock.called</code></a></li><li><a href="#SimpleMock.called_once"><code>SimpleMock.called_once</code></a></li><li><a href="#SimpleMock.called_once_with"><code>SimpleMock.called_once_with</code></a></li><li><a href="#SimpleMock.called_with"><code>SimpleMock.called_with</code></a></li><li><a href="#SimpleMock.calls"><code>SimpleMock.calls</code></a></li><li><a href="#SimpleMock.has_call"><code>SimpleMock.has_call</code></a></li><li><a href="#SimpleMock.has_calls"><code>SimpleMock.has_calls</code></a></li><li><a href="#SimpleMock.mock"><code>SimpleMock.mock</code></a></li><li><a href="#SimpleMock.ncalls"><code>SimpleMock.ncalls</code></a></li><li><a href="#SimpleMock.reset!"><code>SimpleMock.reset!</code></a></li></ul><footer><hr/></footer></article></body></html>
